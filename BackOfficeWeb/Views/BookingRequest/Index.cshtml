@model IEnumerable<Booking.Models.BookingRequest>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
    var pagingModel = new BackOfficeWeb.Models.PagingModel { 
        TotalPages = ViewBag.TotalPages,
        CurrentPage = ViewBag.CurrentPage
    };
}
<div class="wrapper">
    <h4>Process Booking Requests</h4>
    <table class="table table-striped table-hover">
        <tr>
            <th>
                RequestNumber
            </th>
            <th>
                RequestorId
            </th>
            <th>
                RequestorFirstName
            </th>
            <th>
                RequestorLastName
            </th>
            <th>
                RequestorMobile
            </th>
            <th>
                RequestorEmail
            </th>
            <th>
                Status
            </th>
            <th>
                CreatedDate
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestorId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestorFirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestorLastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestorMobilePhoneNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RequestorEmail)
                </td>
                <td class="@item.Status.ToLower()">
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                    @item.CreatedDate.ToString("yyyy-MM-dd hh:mm:ss")
                </td>
                <td>
                    @Html.ActionLink("Process", "Details", new { id = item.RequestNumber, process = true })
                </td>
            </tr>
        }
    </table>
    @Html.Partial("_PagingPartial", pagingModel)
</div>
@section scripts{
    <script>
        $(function () {
            $("#pager").change(function () {
                window.location.href = '@Url.Action("Index", "BookingRequest")' + '?page=' + $(this).val();
            });
        });
    </script>    
}
